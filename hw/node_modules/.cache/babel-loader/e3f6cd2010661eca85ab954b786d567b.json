{"ast":null,"code":"import _classCallCheck from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import*as firebase from'firebase';var firebaseConfig={apiKey:\"AIzaSyC5lIgrWtT8kdWZMZpLivABY-0XVaAfTpk\",authDomain:\"jshw-be2e8.firebaseapp.com\",databaseURL:\"https://jshw-be2e8.firebaseio.com\",projectId:\"jshw-be2e8\",storageBucket:\"jshw-be2e8.appspot.com\",messagingSenderId:\"944614959536\",appId:\"1:944614959536:web:ce35b471d57617abb04e75\"};firebase.initializeApp(firebaseConfig);var Firebase=function Firebase(){_classCallCheck(this,Firebase);this.doSingUp=function(surname,name,login,password,file,authTrue,authFalse){var ref=firebase.database().ref().child('users').child(login).child('Login');ref.on('value',function(snap){if(login===snap.val()){authFalse();}else{var uploadTask=firebase.storage().ref('users/'+file.name).put(file);uploadTask.on('state_changed',function(snapshot){var progress=snapshot.bytesTransferred/snapshot.totalBytes*100;console.log('Upload is '+progress+'% done');switch(snapshot.state){case firebase.storage.TaskState.PAUSED:{console.log('Upload is paused');break;}case firebase.storage.TaskState.RUNNING:{console.log('Upload is running');break;}}},function(error){switch(error.code){case'storage/unauthorized':{console.log(\"User doesn't have permission to access the object\");break;}case'storage/canceled':{console.log(\"User canceled the upload\");break;}case'storage/unknown':{console.log(\"Unknown error occurred, inspect error.serverResponse\");break;}}},function(){uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL){firebase.database().ref('users/'+login).set({Surname:surname,Name:name,Login:login,Password:password,filePath:downloadURL},function(error){if(error){authFalse();}else{authTrue();}});console.log('File available at',downloadURL);});});}});};this.doSingIn=function(login,password,authTrue,authFalse){var ref=firebase.database().ref().child('users').child(login).child('Password');ref.on('value',function(snap){password===snap.val()?authTrue():authFalse();});};};export default Firebase;","map":{"version":3,"sources":["/home/nathankith/jslabs/hw/src/components/Firebase/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","Firebase","doSingUp","surname","name","login","password","file","authTrue","authFalse","ref","database","child","on","snap","val","uploadTask","storage","put","snapshot","progress","bytesTransferred","totalBytes","console","log","state","TaskState","PAUSED","RUNNING","error","code","getDownloadURL","then","downloadURL","set","Surname","Name","Login","Password","filePath","doSingIn"],"mappings":"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","sourcesContent":["import * as firebase from 'firebase'\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyC5lIgrWtT8kdWZMZpLivABY-0XVaAfTpk\",\n    authDomain: \"jshw-be2e8.firebaseapp.com\",\n    databaseURL: \"https://jshw-be2e8.firebaseio.com\",\n    projectId: \"jshw-be2e8\",\n    storageBucket: \"jshw-be2e8.appspot.com\",\n    messagingSenderId: \"944614959536\",\n    appId: \"1:944614959536:web:ce35b471d57617abb04e75\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nclass Firebase {\n\n    doSingUp = (surname, name, login, password, file, authTrue, authFalse) => {\n        const ref = firebase.database().ref().child('users').child(login).child('Login');\n        ref.on('value', snap => {\n            if (login === snap.val()) {\n                authFalse();\n            } else {\n                const uploadTask = firebase.storage().ref('users/' + file.name).put(file);\n\n                uploadTask.on('state_changed', function (snapshot) {\n                    var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                    console.log('Upload is ' + progress + '% done');\n                    switch (snapshot.state) {\n                        case firebase.storage.TaskState.PAUSED: {\n                            console.log('Upload is paused');\n                            break;\n                        }\n                        case firebase.storage.TaskState.RUNNING: {\n                            console.log('Upload is running');\n                            break;\n                        }\n                    }\n                }, function (error) {\n                    switch (error.code) {\n                        case 'storage/unauthorized': {\n                            console.log(\"User doesn't have permission to access the object\");\n                            break;\n                        }\n                        case 'storage/canceled': {\n                            console.log(\"User canceled the upload\");\n                            break;\n                        }\n                        case 'storage/unknown': {\n                            console.log(\"Unknown error occurred, inspect error.serverResponse\");\n                            break;\n                        }\n                    }\n                }, function () {\n                    uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n                        firebase.database().ref('users/' + login).set({\n                            Surname: surname,\n                            Name: name,\n                            Login: login,\n                            Password: password,\n                            filePath: downloadURL\n                        }, function (error) {\n                            if (error) {\n                                authFalse();\n                            } else {\n                                authTrue();\n                            }\n                        });\n                        console.log('File available at', downloadURL);\n                    });\n                });\n            }\n        })\n    }\n\n    doSingIn = (login, password, authTrue, authFalse) => {\n        const ref = firebase.database().ref().child('users').child(login).child('Password');\n        ref.on('value', snap => {\n            password === snap.val() ? authTrue() : authFalse();\n        })\n    }\n}\n\nexport default Firebase;"]},"metadata":{},"sourceType":"module"}