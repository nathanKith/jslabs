{"ast":null,"code":"import _objectSpread from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nathankith/jslabs/hw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./converter-form.css';import{ConverterOption}from'../converter-option/converter-option';var INITIAL_STATE={left_select:'',right_select:'',left_input:'',right_input:''};export var ConverterForm=/*#__PURE__*/function(_Component){_inherits(ConverterForm,_Component);var _super=_createSuper(ConverterForm);function ConverterForm(props){var _this;_classCallCheck(this,ConverterForm);_this=_super.call(this,props);_this.onChangeLeftInput=function(event){var value=event.target.value.trim().replace(/[-\\.;\":'a-zA-Zа-яА-Я]/,'');_this.setState(_defineProperty({},event.target.name,value));var right_select=_this.state.right_select;Object.keys(_this.state.data).map(function(key){return key===right_select?_this.setState({right_input:_this.state.data[key]*value===0?'':(_this.state.data[key]*value).toFixed(3)}):null;});};_this.onChangeRightInput=function(event){var value=event.target.value.trim().replace(/[-\\.;\":'a-zA-Zа-яА-Я]/,'');_this.setState(_defineProperty({},event.target.name,value));var right_select=_this.state.right_select;Object.keys(_this.state.data).map(function(key){return key===right_select?_this.setState({left_input:1/_this.state.data[key]*value===0?'':(1/_this.state.data[key]*value).toFixed(3)}):null;});};_this.onChangeLeftSelect=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));var _this$state=_this.state,left_input=_this$state.left_input,right_select=_this$state.right_select;fetch('https://api.exchangeratesapi.io/latest?base='+event.target.value).then(function(r){return r.json();}).then(function(d){_this.setState({data:d.rates});Object.keys(d.rates).map(function(key){return key===right_select?_this.setState({right_input:(_this.state.data[key]*left_input).toFixed(3)}):null;});});};_this.onChangeRightSelect=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));var left_input=_this.state.left_input;Object.keys(_this.state.data).map(function(key){return key===event.target.value?_this.setState({right_input:(_this.state.data[key]*left_input).toFixed(3)}):null;});};_this.state=_objectSpread({},INITIAL_STATE);_this.state={data:undefined};return _this;}_createClass(ConverterForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('https://api.exchangeratesapi.io/latest?base=CAD').then(function(r){return r.json();}).then(function(d){return _this2.setState({data:d.rates});});this.setState({left_select:\"CAD\",right_select:\"CAD\"});}},{key:\"render\",value:function render(){var _this$state2=this.state,left_select=_this$state2.left_select,right_select=_this$state2.right_select,left_input=_this$state2.left_input,right_input=_this$state2.right_input;return/*#__PURE__*/React.createElement(\"div\",{className:\"ConverterForm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ConverterFormInner\"},/*#__PURE__*/React.createElement(\"span\",{className:\"ConverterHeaderText\"},\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0435\\u0442\\u0441\\u044F, \\u043A\\u043E\\u043D\\u0432\\u0435\\u0440\\u0442\\u0438\\u0440\\u0443\\u0439\"),/*#__PURE__*/React.createElement(\"div\",{className:\"ConverterInputs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ConvertOption Left\"},/*#__PURE__*/React.createElement(\"select\",{name:\"left_select\",value:left_select,onChange:this.onChangeLeftSelect},!this.state.data?/*#__PURE__*/React.createElement(\"div\",null,\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B\"):Object.keys(this.state.data).map(function(key){return/*#__PURE__*/React.createElement(ConverterOption,{convertName:key});})),/*#__PURE__*/React.createElement(\"input\",{className:\"InputConverter\",name:\"left_input\",value:left_input,onkeyup:\"this.value = this.value.replace(/[^\\\\d]/g,'');\",onChange:this.onChangeLeftInput,type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"ConvertOption\"},/*#__PURE__*/React.createElement(\"select\",{name:\"right_select\",value:right_select,onChange:this.onChangeRightSelect},!this.state.data?/*#__PURE__*/React.createElement(\"div\",null,\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u0435 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B\"):Object.keys(this.state.data).map(function(key){return/*#__PURE__*/React.createElement(ConverterOption,{convertName:key});})),/*#__PURE__*/React.createElement(\"input\",{disabled:\"true\",className:\"InputConverter\",name:\"right_input\",value:right_input,onChange:this.onChangeRightInput,type:\"text\"})))));}}]);return ConverterForm;}(Component);","map":{"version":3,"sources":["/home/nathankith/jslabs/hw/src/components/converter-form/converter-form.jsx"],"names":["React","Component","ConverterOption","INITIAL_STATE","left_select","right_select","left_input","right_input","ConverterForm","props","onChangeLeftInput","event","value","target","trim","replace","setState","name","state","Object","keys","data","map","key","toFixed","onChangeRightInput","onChangeLeftSelect","fetch","then","r","json","d","rates","onChangeRightSelect","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './converter-form.css'\nimport { ConverterOption } from '../converter-option/converter-option';\n\nconst INITIAL_STATE = {\n    left_select: '',\n    right_select: '',\n    left_input: '',\n    right_input: '',\n};\n\nexport class ConverterForm extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = { ...INITIAL_STATE };\n        this.state = { data: undefined };\n    }\n\n    componentDidMount() {\n        fetch('https://api.exchangeratesapi.io/latest?base=CAD')\n            .then(r => r.json())\n            .then(d => this.setState({ data: d.rates }));\n        this.setState({ left_select: \"CAD\", right_select: \"CAD\" });\n    }\n\n    onChangeLeftInput = event => {\n        const value = event.target.value.trim().replace(/[-\\.;\":'a-zA-Zа-яА-Я]/, '');\n        this.setState({ [event.target.name]: value })\n\n        const { right_select } = this.state;\n        Object.keys(this.state.data).map(key => key === right_select ? this.setState({ right_input: (this.state.data[key] * value) === 0 ? '' : (this.state.data[key] * value).toFixed(3) }) : null)\n    }\n\n    onChangeRightInput = event => {\n        const value = event.target.value.trim().replace(/[-\\.;\":'a-zA-Zа-яА-Я]/, '');\n        this.setState({ [event.target.name]: value });\n\n        const { right_select } = this.state;\n        Object.keys(this.state.data).map(key => key === right_select ? this.setState({ left_input: ((1 / this.state.data[key]) * value) === 0 ? '' : ((1 / this.state.data[key]) * value).toFixed(3) }) : null)\n    }\n\n    onChangeLeftSelect = event => {\n        this.setState({ [event.target.name]: event.target.value });\n        const { left_input, right_select } = this.state;\n        fetch('https://api.exchangeratesapi.io/latest?base=' + event.target.value)\n            .then(r => r.json())\n            .then(d => {\n                this.setState({ data: d.rates });\n                Object.keys(d.rates).map(key => key === right_select ? this.setState({ right_input: (this.state.data[key] * left_input).toFixed(3) }) : null)\n            });\n    }\n\n    onChangeRightSelect = event => {\n        this.setState({ [event.target.name]: event.target.value });\n\n        const { left_input } = this.state;\n        Object.keys(this.state.data).map(key => key === event.target.value ? this.setState({ right_input: (this.state.data[key] * left_input).toFixed(3) }) : null)\n    }\n\n    render() {\n        const {\n            left_select,\n            right_select,\n            left_input,\n            right_input,\n        } = this.state;\n\n        return (\n            <div className=\"ConverterForm\">\n                <div className=\"ConverterFormInner\">\n                    <span className=\"ConverterHeaderText\">Получается, конвертируй</span>\n                    <div className=\"ConverterInputs\">\n                        <div className=\"ConvertOption Left\">\n                            <select name=\"left_select\" value={left_select} onChange={this.onChangeLeftSelect}>\n                                {\n                                    !this.state.data\n                                        ? <div>Данные не загружены</div>\n                                        : Object.keys(this.state.data).map(key => <ConverterOption convertName={key} />)\n                                }\n                            </select>\n                            <input className=\"InputConverter\" name=\"left_input\" value={left_input} onkeyup=\"this.value = this.value.replace(/[^\\d]/g,'');\" onChange={this.onChangeLeftInput} type=\"text\" />\n                        </div>\n\n                        <div className=\"ConvertOption\">\n                            <select name=\"right_select\" value={right_select} onChange={this.onChangeRightSelect} >\n                                {\n                                    !this.state.data\n                                        ? <div>Данные не загружены</div>\n                                        : Object.keys(this.state.data).map(key => <ConverterOption convertName={key} />)\n                                }\n                            </select>\n                            <input disabled=\"true\" className=\"InputConverter\" name=\"right_input\" value={right_input} onChange={this.onChangeRightInput} type=\"text\"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}